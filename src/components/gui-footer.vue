<template>
  <footer class="footer">
    <button
      class="footer-button"
      @click="toggleSound"
    >
      <svg
        width="24"
        height="22"
        viewBox="0 0 24 22"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          v-if="!muted"
          d="M13.2838 1.12414C13.7912 1.35628 14.1176 1.86521 14.1176 2.4277V19.5703C14.1176 20.1328 13.7912 20.6417 13.2838 20.8739C12.7765 21.106 12.1809 21.0123 11.7662 20.6373L5.81471 15.2847H2.82353C1.26618 15.2847 0 14.0034 0 12.4276V9.57046C0 7.99459 1.26618 6.71336 2.82353 6.71336H5.81471L11.7662 1.36075C12.1809 0.985753 12.7765 0.896468 13.2838 1.12414ZM20.8721 4.34732C22.7779 5.91872 24 8.31601 24 10.999C24 13.682 22.7779 16.0793 20.8721 17.6507C20.4176 18.0257 19.7515 17.9543 19.3809 17.4945C19.0103 17.0347 19.0809 16.3606 19.5353 15.9856C20.9691 14.807 21.8824 13.0124 21.8824 10.999C21.8824 8.98565 20.9691 7.19103 19.5353 6.00801C19.0809 5.63301 19.0147 4.95892 19.3809 4.4991C19.7471 4.03928 20.4176 3.97232 20.8721 4.34285V4.34732ZM18.2029 7.67317C19.1515 8.45887 19.7647 9.65528 19.7647 10.999C19.7647 12.3427 19.1515 13.5392 18.2029 14.3249C17.7485 14.6999 17.0824 14.6284 16.7118 14.1686C16.3412 13.7088 16.4118 13.0347 16.8662 12.6597C17.3426 12.2669 17.6471 11.6686 17.6471 10.999C17.6471 10.3294 17.3426 9.73117 16.8662 9.33386C16.4118 8.95886 16.3456 8.28476 16.7118 7.82495C17.0779 7.36513 17.7485 7.29817 18.2029 7.6687V7.67317Z"
          fill="currentColor"
        />

        <path
          v-else
          d="M13.2838 1.12414C13.7912 1.35628 14.1176 1.86521 14.1176 2.4277V19.5703C14.1176 20.1328 13.7912 20.6417 13.2838 20.8739C12.7765 21.106 12.1809 21.0123 11.7662 20.6373L5.81471 15.2847H2.82353C1.26618 15.2847 0 14.0034 0 12.4276V9.57046C0 7.99459 1.26618 6.71336 2.82353 6.71336H5.81471L11.7662 1.36075C12.1809 0.985753 12.7765 0.896468 13.2838 1.12414Z"
          fill="currentColor"
        />
      </svg>

      <label class="footer-button__label"> Sound </label>
    </button>

    <div class="footer__additional__actions">
      <a
        :href="SIGN_UP_LINK"
        target="_blank"
        rel="noreferrer"
        class="footer-button"
      >
        <svg
          width="24"
          height="22"
          viewBox="0 0 24 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 20.5C10.6872 20.5 9.45267 20.2507 8.2965 19.752C7.14033 19.2533 6.13467 18.5766 5.2795 17.7218C4.42433 16.8669 3.74725 15.8617 3.24825 14.706C2.74942 13.5503 2.5 12.3156 2.5 11.0017C2.5 9.68775 2.74933 8.45267 3.248 7.2965C3.74667 6.14033 4.42342 5.13467 5.27825 4.2795C6.13308 3.42433 7.13833 2.74725 8.294 2.24825C9.44967 1.74942 10.6844 1.5 11.9983 1.5C13.3123 1.5 14.5473 1.74942 15.7035 2.24825C16.8597 2.74692 17.8653 3.42375 18.7205 4.27875C19.5757 5.13375 20.2528 6.13917 20.7518 7.295C21.2506 8.45083 21.5 9.68583 21.5 11V12.2192C21.5 13.1321 21.1866 13.9071 20.5598 14.5443C19.9329 15.1814 19.163 15.5 18.25 15.5C17.6602 15.5 17.1133 15.3558 16.6095 15.0673C16.1057 14.7788 15.7076 14.3819 15.4152 13.8767C14.9832 14.3923 14.4727 14.7917 13.8837 15.075C13.2946 15.3583 12.6667 15.5 12 15.5C10.7513 15.5 9.68917 15.0622 8.8135 14.1865C7.93783 13.3108 7.5 12.2487 7.5 11C7.5 9.75133 7.93783 8.68917 8.8135 7.8135C9.68917 6.93783 10.7513 6.5 12 6.5C13.2487 6.5 14.3108 6.93783 15.1865 7.8135C16.0622 8.68917 16.5 9.75133 16.5 11V12.2192C16.5 12.7102 16.6689 13.1298 17.0068 13.478C17.3446 13.826 17.759 14 18.25 14C18.741 14 19.1554 13.826 19.4932 13.478C19.8311 13.1298 20 12.7102 20 12.2192V11C20 8.76667 19.225 6.875 17.675 5.325C16.125 3.775 14.2333 3 12 3C9.76667 3 7.875 3.775 6.325 5.325C4.775 6.875 4 8.76667 4 11C4 13.2333 4.775 15.125 6.325 16.675C7.875 18.225 9.76667 19 12 19H17V20.5H12ZM12 14C12.8333 14 13.5417 13.7083 14.125 13.125C14.7083 12.5417 15 11.8333 15 11C15 10.1667 14.7083 9.45833 14.125 8.875C13.5417 8.29167 12.8333 8 12 8C11.1667 8 10.4583 8.29167 9.875 8.875C9.29167 9.45833 9 10.1667 9 11C9 11.8333 9.29167 12.5417 9.875 13.125C10.4583 13.7083 11.1667 14 12 14Z"
            fill="white"
          />
        </svg>

        <label class="footer-button__label"> Sign Up </label>
      </a>

      <button
        class="footer-button"
        @click="onShare"
      >
        <svg
          width="24"
          height="22"
          viewBox="0 0 24 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M18.0268 21.2065C17.142 21.2065 16.39 20.8974 15.7708 20.2792C15.1515 19.6611 14.8418 18.9104 14.8418 18.0272C14.8418 17.9312 14.8648 17.7158 14.9108 17.381L8.08905 13.4065C7.81055 13.6525 7.49247 13.8453 7.1348 13.985C6.77713 14.1247 6.39397 14.1945 5.9853 14.1945C5.10047 14.1945 4.34838 13.8844 3.72905 13.2642C3.10972 12.6439 2.80005 11.8907 2.80005 11.0047C2.80005 10.1186 3.10972 9.3649 3.72905 8.74374C4.34838 8.12257 5.10047 7.81199 5.9853 7.81199C6.3933 7.81199 6.7783 7.88282 7.1403 8.02449C7.5023 8.16615 7.82455 8.36199 8.10705 8.61199L14.905 4.64949C14.8755 4.54082 14.8576 4.43332 14.8513 4.32699C14.845 4.22065 14.8418 4.10674 14.8418 3.98524C14.8418 3.10041 15.1515 2.34832 15.771 1.72899C16.3905 1.10966 17.1427 0.799988 18.0275 0.799988C18.9125 0.799988 19.6646 1.10974 20.2838 1.72924C20.903 2.34857 21.2125 3.10074 21.2125 3.98574C21.2125 4.87057 20.9029 5.62257 20.2836 6.24174C19.6642 6.86107 18.9121 7.17074 18.0273 7.17074C17.6098 7.17074 17.2185 7.09791 16.8533 6.95224C16.4881 6.80657 16.1642 6.60474 15.8815 6.34674L9.10755 10.2852C9.14088 10.4061 9.16172 10.5227 9.17005 10.635C9.17838 10.7472 9.18255 10.8709 9.18255 11.0062C9.18255 11.1416 9.17738 11.2674 9.16705 11.3837C9.15672 11.5001 9.13488 11.6185 9.10155 11.739L15.8695 15.6777C16.1522 15.4157 16.4774 15.2099 16.845 15.0602C17.2129 14.9106 17.607 14.8357 18.0273 14.8357C18.9121 14.8357 19.6642 15.1459 20.2836 15.7662C20.9029 16.3866 21.2125 17.1397 21.2125 18.0257C21.2125 18.9119 20.9028 19.6636 20.2833 20.2807C19.664 20.8979 18.9118 21.2065 18.0268 21.2065Z"
            fill="white"
          />
        </svg>

        <label class="footer-button__label"> Share </label>
      </button>
    </div>
  </footer>
</template>

<script setup lang="ts">
  import { shareIt } from '~/utils/share-it';
  import type { MtxLogger } from '~/services/mtx-logger';
  import { SIGN_UP_LINK } from '~/constants/common';

  const appStore = useAppStore();
  const mtxLogger = inject<MtxLogger>('mtxLogger');

  const { muted } = storeToRefs(appStore);

  const toggleSound = () => {
    appStore.toggleMuted();
  };

  const onShare = async () => {
    const title = document.title;
    const text = 'Explore the wonders of Costa Rica through immersive 3D portals.';
    const url = window.location.href;

    mtxLogger?.logEvent('Interactions', 'Share');
    await shareIt(title, text, url);
  };
</script>

<style scoped lang="scss">
  .footer {
    @include absBottomLeft(0, 0);
    @include flexBox(row, space-between, center);

    width: 100%;
    padding: 10px 20px;

    &__additional__actions {
      @include flexBox(row, flex-end, center);

      width: max-content;

      > * + * {
        margin-left: 15px;
      }
    }

    &-button {
      @include flexBox(column, center, center);

      cursor: pointer;
      filter: drop-shadow(0 0 12px #000);

      text-decoration: unset;
      color: $c-white;

      > * + * {
        margin-top: 4px;
      }

      svg {
        width: 24px;
        height: auto;
      }

      &__label {
        @include text('GothamBold', 10px, 700, 100%);
      }
    }
  }
</style>
